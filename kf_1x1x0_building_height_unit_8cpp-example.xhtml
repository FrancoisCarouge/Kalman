<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kalman: kf_1x1x0_building_height_unit.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Kalman<span id="projectnumber">&#160;0.4.0</span>
   </div>
   <div id="projectbrief">Kalman Filter</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.xhtml');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('kf_1x1x0_building_height_unit_8cpp-example.xhtml',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">kf_1x1x0_building_height_unit.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>Estimating the height of a building.</p>
<p>Estimating the height of a building.</p><dl class="section copyright"><dt>Copyright</dt><dd>This example is transcribed from KalmanFilter.NET copyright Alex Becker. </dd>
<dd>
This example also transcribes Mateusz Pusz's mp-units Kalman filter sample.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://www.kalmanfilter.net/kalman1d.html#ex5">https://www.kalmanfilter.net/kalman1d.html#ex5</a> </dd>
<dd>
<a href="https://github.com/mpusz/mp-units/blob/master/example/kalman_filter/kalman_filter-example_5.cpp">https://github.com/mpusz/mp-units/blob/master/example/kalman_filter/kalman_filter-example_5.cpp</a></dd></dl>
<p>Assume that we would like to estimate the height of a building using a very imprecise altimeter. We know for sure, that the building height doesn’t change over time, at least during the short measurement process. The true building height is 50 meters. The altimeter measurement error (standard deviation) is 5 meters. The set of ten measurements is: 48.54m, 47.11m, 55.01m, 55.15m, 49.89m, 40.85m, 46.72m, 50.05m, 51.27m, 49.95m.</p>
<div class="image">
<object type="image/svg+xml" data="kf_1x1x0_building_height.svg" style="pointer-events: none;"></object>
</div>
<div class="fragment"><div class="line"><span class="comment">/*  __          _      __  __          _   _</span></div>
<div class="line"><span class="comment">| |/ /    /\   | |    |  \/  |   /\   | \ | |</span></div>
<div class="line"><span class="comment">| &#39; /    /  \  | |    | \  / |  /  \  |  \| |</span></div>
<div class="line"><span class="comment">|  &lt;    / /\ \ | |    | |\/| | / /\ \ | . ` |</span></div>
<div class="line"><span class="comment">| . \  / ____ \| |____| |  | |/ ____ \| |\  |</span></div>
<div class="line"><span class="comment">|_|\_\/_/    \_\______|_|  |_/_/    \_\_| \_|</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">Kalman Filter</span></div>
<div class="line"><span class="comment">Version 0.4.0</span></div>
<div class="line"><span class="comment">https://github.com/FrancoisCarouge/Kalman</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">SPDX-License-Identifier: Unlicense</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">This is free and unencumbered software released into the public domain.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">Anyone is free to copy, modify, publish, use, compile, sell, or</span></div>
<div class="line"><span class="comment">distribute this software, either in source code form or as a compiled</span></div>
<div class="line"><span class="comment">binary, for any purpose, commercial or non-commercial, and by any</span></div>
<div class="line"><span class="comment">means.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">In jurisdictions that recognize copyright laws, the author or authors</span></div>
<div class="line"><span class="comment">of this software dedicate any and all copyright interest in the</span></div>
<div class="line"><span class="comment">software to the public domain. We make this dedication for the benefit</span></div>
<div class="line"><span class="comment">of the public at large and to the detriment of our heirs and</span></div>
<div class="line"><span class="comment">successors. We intend this dedication to be an overt act of</span></div>
<div class="line"><span class="comment">relinquishment in perpetuity of all present and future rights to this</span></div>
<div class="line"><span class="comment">software under copyright law.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div>
<div class="line"><span class="comment">EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div>
<div class="line"><span class="comment">MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div>
<div class="line"><span class="comment">IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div>
<div class="line"><span class="comment">OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div>
<div class="line"><span class="comment">ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div>
<div class="line"><span class="comment">OTHER DEALINGS IN THE SOFTWARE.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">For more information, please refer to &lt;https://unlicense.org&gt; */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="kalman_8hpp.xhtml">fcarouge/kalman.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="unit_8hpp.xhtml">fcarouge/unit.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacefcarouge_1_1sample.xhtml">fcarouge::sample</a> {</div>
<div class="line"><span class="keyword">namespace </span>{</div>
<div class="line">[[maybe_unused]] <span class="keyword">auto</span> sample{[] {</div>
<div class="line">  <span class="comment">// A one-dimensional filter, constant system dynamic model.</span></div>
<div class="line">  <a id="a0" name="a0"></a><a class="code hl_function" href="namespacefcarouge.xhtml#ae4d1dbbab6a8bdcaa50062d0cb879777">kalman</a> filter{<span class="comment">// One can estimate the building height simply by looking at it.</span></div>
<div class="line">                <span class="comment">// The estimated state building height is: X = 60 meters.</span></div>
<div class="line">                state{<a id="a1" name="a1"></a><a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{60. * m}},</div>
<div class="line">                <span class="comment">// The building height measurement Z in meters.</span></div>
<div class="line">                output&lt;height&gt;,</div>
<div class="line">                <span class="comment">// A human’s estimation error (standard deviation) is about 15</span></div>
<div class="line">                <span class="comment">// meters: σ = 15. Consequently the variance is σ^2 = 225. The</span></div>
<div class="line">                <span class="comment">// estimate uncertainty is: P = 225 m^2.</span></div>
<div class="line">                estimate_uncertainty{225. * m2},</div>
<div class="line">                <span class="comment">// Since the standard deviation σ of the altimeter measurement</span></div>
<div class="line">                <span class="comment">// error is 5, the variance σ^2 would be 25, thus the</span></div>
<div class="line">                <span class="comment">// measurement, output uncertainty is: R = 25 m^2.</span></div>
<div class="line">                output_uncertainty{25. * m2}};</div>
<div class="line"> </div>
<div class="line">  assert(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{60. * m} == filter.x() &amp;&amp;</div>
<div class="line">         <span class="stringliteral">&quot;Since our system&#39;s dynamic model is constant, i.e. the building &quot;</span></div>
<div class="line">         <span class="stringliteral">&quot;doesn&#39;t change its height: 60 meters.&quot;</span>);</div>
<div class="line">  assert(225. * m2 == filter.p() &amp;&amp;</div>
<div class="line">         <span class="stringliteral">&quot;The extrapolated estimate uncertainty (variance) also doesn&#39;t &quot;</span></div>
<div class="line">         <span class="stringliteral">&quot;change: 225&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Now, we shall predict the next state based on the initialization values.</span></div>
<div class="line">  <span class="comment">// Note: The prediction operation needs not be performed since the process</span></div>
<div class="line">  <span class="comment">// noise covariance Q is null in this example.</span></div>
<div class="line">  <span class="comment">// Measure and update: the first measurement is: z1 = 48.54m.</span></div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{48.54 * m});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// And so on.</span></div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{47.11 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{55.01 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{55.15 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{49.89 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{40.85 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{46.72 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{50.05 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{51.27 * m});</div>
<div class="line">  filter.update(<a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{49.95 * m});</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// After 10 measurements the filter estimates the height of the building</span></div>
<div class="line">  <span class="comment">// at 49.57m.</span></div>
<div class="line">  assert(abs(1 - filter.x() / <a class="code hl_typedef" href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">height</a>{49.57 * m}) &lt; 0.001 &amp;&amp;</div>
<div class="line">         <span class="stringliteral">&quot;After 10 measurement and update iterations, the building estimated &quot;</span></div>
<div class="line">         <span class="stringliteral">&quot;height is: 49.57m.&quot;</span>);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}()};</div>
<div class="line">} <span class="comment">// namespace</span></div>
<div class="line">} <span class="comment">// namespace fcarouge::sample</span></div>
<div class="ttc" id="akalman_8hpp_xhtml"><div class="ttname"><a href="kalman_8hpp.xhtml">kalman.hpp</a></div><div class="ttdoc">The Kalman filter class and library top-level header.</div></div>
<div class="ttc" id="anamespacefcarouge_1_1sample_xhtml"><div class="ttname"><a href="namespacefcarouge_1_1sample.xhtml">fcarouge::sample</a></div><div class="ttdoc">Examples, tutorials, demonstrators of the library.</div></div>
<div class="ttc" id="anamespacefcarouge_xhtml_a9b124da26de87a5e94ff3b815915769f"><div class="ttname"><a href="namespacefcarouge.xhtml#a9b124da26de87a5e94ff3b815915769f">fcarouge::height</a></div><div class="ttdeci">mp_units::quantity&lt; mp_units::isq::height[m]&gt; height</div><div class="ttdef"><b>Definition</b> <a href="unit_8hpp_source.xhtml#l00081">unit.hpp:81</a></div></div>
<div class="ttc" id="anamespacefcarouge_xhtml_ae4d1dbbab6a8bdcaa50062d0cb879777"><div class="ttname"><a href="namespacefcarouge.xhtml#ae4d1dbbab6a8bdcaa50062d0cb879777">fcarouge::kalman</a></div><div class="ttdeci">kalman(Arguments... arguments) -&gt; kalman&lt; internal::deduce_filter&lt; Arguments... &gt; &gt;</div><div class="ttdoc">Deduces the filter type from its declared configuration.</div></div>
<div class="ttc" id="aunit_8hpp_xhtml"><div class="ttname"><a href="unit_8hpp.xhtml">unit.hpp</a></div><div class="ttdoc">Quantities and units facade for mp-units third party implementation.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
