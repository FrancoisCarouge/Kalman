<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kalman: dog_position.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kalman<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">Kalman Filter for C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.xhtml');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dog_position_8cpp-example.xhtml',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">dog_position.cpp</div></div>
</div><!--header-->
<div class="contents">
<p >Estimating the Position of a Dog</p><dl class="section copyright"><dt>Copyright</dt><dd>This example is transcribed from Kalman and Bayesian Filters in Python copyright Roger Labbe</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python/blob/master/04-One-Dimensional-Kalman-Filters.ipynb">https://github.com/rlabbe/Kalman-and-Bayesian-Filters-in-Python/blob/master/04-One-Dimensional-Kalman-Filters.ipynb</a></dd></dl>
<p>Assume that in our latest hackathon someone created an RFID tracker that provides a reasonably accurate position of the dog. The sensor returns the distance of the dog from the left end of the hallway in meters. So, 23.4 would mean the dog is 23.4 meters from the left end of the hallway. The sensor is not perfect. A reading of 23.4 could correspond to the dog being at 23.7, or 23.0. However, it is very unlikely to correspond to a position of 47.6. Testing during the hackathon confirmed this result - the sensor is 'reasonably' accurate, and while it had errors, the errors are small. Furthermore, the errors seemed to be evenly distributed on both sides of the true position; a position of 23 m would equally likely be measured as 22.9 or 23.1. Perhaps we can model this with a Gaussian. We predict that the dog is moving. This prediction is not perfect. Sometimes our prediction will overshoot, sometimes it will undershoot. We are more likely to undershoot or overshoot by a little than a lot. Perhaps we can also model this with a Gaussian.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="kalman_8hpp.xhtml">fcarouge/kalman.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacefcarouge_1_1sample.xhtml">fcarouge::sample</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">namespace</span></div>
<div class="line">{</div>
<div class="line">[[maybe_unused]] <span class="keyword">auto</span> <a id="a0" name="a0"></a><a class="code hl_variable" href="namespacefcarouge_1_1sample_1_1anonymous__namespace_02dog__position_8cpp_03.xhtml#aafec5a2e95aa8989c1e8f9708622ca35">dog_position</a>{ [] {</div>
<div class="line">  <span class="keyword">using</span> <a id="a1" name="a1"></a><a class="code hl_typedef" href="namespacefcarouge_1_1eigen.xhtml#a1b0dac1811e65af94771d85401c9ca39">kalman</a> = <a id="_a2" name="_a2"></a><a class="code hl_class" href="classfcarouge_1_1kalman.xhtml">fcarouge::kalman&lt;double, double, double&gt;</a>;</div>
<div class="line">  <a class="code hl_typedef" href="namespacefcarouge_1_1eigen.xhtml#a1b0dac1811e65af94771d85401c9ca39">kalman</a> k;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Initialization</span></div>
<div class="line">  <span class="comment">// This is the dog&#39;s initial position expressed as a Gaussian. The position is</span></div>
<div class="line">  <span class="comment">// 0 meters, and the variance to 400 m, which is a standard deviation of 20</span></div>
<div class="line">  <span class="comment">// meters. You can think of this as saying &quot;I believe with 99.7% accuracy the</span></div>
<div class="line">  <span class="comment">// position is 0 plus or minus 60 meters&quot;. This is because with Gaussians</span></div>
<div class="line">  <span class="comment">// ~99.7% of values fall within of the mean.</span></div>
<div class="line">  k.x(1.);</div>
<div class="line">  k.p(20 * 20.);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Prediction</span></div>
<div class="line">  <span class="comment">// Variance in the dog&#39;s movement. The process variance is how much error</span></div>
<div class="line">  <span class="comment">// there is in the process model. Dogs rarely do what we expect, and things</span></div>
<div class="line">  <span class="comment">// like hills or the whiff of a squirrel will change his progress.</span></div>
<div class="line">  k.q(1.);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Measure and Update</span></div>
<div class="line">  <span class="comment">// Variance in the sensor. The meaning of sensor variance should be clear - it</span></div>
<div class="line">  <span class="comment">// is how much variance there is in each measurement.</span></div>
<div class="line">  k.r(2.);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// We are predicting that at each time step the dog moves forward one meter.</span></div>
<div class="line">  <span class="comment">// This is the process model - the description of how we think the dog moves.</span></div>
<div class="line">  <span class="comment">// How do I know the velocity? Magic? Consider it a prediction, or perhaps we</span></div>
<div class="line">  <span class="comment">// have a secondary velocity sensor. Please accept this simplification for</span></div>
<div class="line">  <span class="comment">// now.</span></div>
<div class="line">  k.g(1.);</div>
<div class="line"> </div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(1.354);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(1.882);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(4.341);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(7.156);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(6.939);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(6.844);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(9.847);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(12.553);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(16.273);</div>
<div class="line">  k.predict(1.);</div>
<div class="line">  k.update(14.8);</div>
<div class="line"> </div>
<div class="line">  assert(</div>
<div class="line">      15.053 - 0.001 &lt; k.x() &amp;&amp; k.x() &lt; 15.053 + 0.001 &amp;&amp;</div>
<div class="line">      <span class="stringliteral">&quot;Here we can see that the variance converges to 2.1623 in 9 steps. This &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;means that we have become very confident in our position estimate. It &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;is equal to meters. Contrast this to the sensor&#39;s meters.&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}() };</div>
<div class="line"> </div>
<div class="line">} <span class="comment">// namespace</span></div>
<div class="line">} <span class="comment">// namespace fcarouge::sample</span></div>
<div class="ttc" id="aclassfcarouge_1_1kalman_xhtml"><div class="ttname"><a href="classfcarouge_1_1kalman.xhtml">fcarouge::kalman</a></div><div class="ttdoc">Kalman filter.</div><div class="ttdef"><b>Definition:</b> <a href="kalman_8hpp_source.xhtml#l00185">kalman.hpp:186</a></div></div>
<div class="ttc" id="akalman_8hpp_xhtml"><div class="ttname"><a href="kalman_8hpp.xhtml">kalman.hpp</a></div><div class="ttdoc">The main Kalman filter class.</div></div>
<div class="ttc" id="anamespacefcarouge_1_1eigen_xhtml_a1b0dac1811e65af94771d85401c9ca39"><div class="ttname"><a href="namespacefcarouge_1_1eigen.xhtml#a1b0dac1811e65af94771d85401c9ca39">fcarouge::eigen::kalman</a></div><div class="ttdeci">fcarouge::kalman&lt; State, Output, Input, transpose, symmetrize, divide, identity_matrix, UpdateTypes, PredictionTypes &gt; kalman</div><div class="ttdoc">Eigen-based Kalman filter.</div><div class="ttdef"><b>Definition:</b> <a href="eigen_2kalman_8hpp_source.xhtml#l00086">kalman.hpp:88</a></div></div>
<div class="ttc" id="anamespacefcarouge_1_1sample_1_1anonymous__namespace_02dog__position_8cpp_03_xhtml_aafec5a2e95aa8989c1e8f9708622ca35"><div class="ttname"><a href="namespacefcarouge_1_1sample_1_1anonymous__namespace_02dog__position_8cpp_03.xhtml#aafec5a2e95aa8989c1e8f9708622ca35">fcarouge::sample::anonymous_namespace{dog_position.cpp}::dog_position</a></div><div class="ttdeci">auto dog_position</div><div class="ttdef"><b>Definition:</b> <a href="dog__position_8cpp_source.xhtml#l00034">dog_position.cpp:34</a></div></div>
<div class="ttc" id="anamespacefcarouge_1_1sample_xhtml"><div class="ttname"><a href="namespacefcarouge_1_1sample.xhtml">fcarouge::sample</a></div><div class="ttdoc">Examples, tutorials, demonstrators of the library.</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Aug 21 2022 00:25:17 for Kalman by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
